@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Enable class-based dark mode for next-themes */
@custom-variant dark (&:where(.dark, .dark *, .dark-1, .dark-1 *, .dark-2, .dark-2 *));

/* ========================================
   PRIMITIVE COLOR TOKENS
   기본 팔레트 - 변경 시 전체 테마에 영향
   ======================================== */

:root {
  /* ===== White & Black ===== */
  --p-white: #ffffff;
  --p-black: #000000;

  /* ===== Cloud Dancer Scale (Pantone 2026 Color of the Year) =====
     Base: #F0EEE9 - 따뜻한 화이트 톤 */
  --p-cloud-50: #faf9f7;
  --p-cloud-100: #f0eee9;  /* Cloud Dancer 원본 */
  --p-cloud-200: #e6e3dc;
  --p-cloud-300: #d9d5cc;
  --p-cloud-400: #c4bfb3;
  --p-cloud-500: #a8a295;
  --p-cloud-600: #8a8478;
  --p-cloud-700: #6b665c;
  --p-cloud-800: #4d4943;
  --p-cloud-900: #2f2d2a;

  /* ===== Terracotta Scale (Cloud Dancer Accent) ===== */
  --p-terracotta-300: #dba07a;
  --p-terracotta-400: #d18a5e;
  --p-terracotta-500: #c2754f;  /* 메인 */
  --p-terracotta-600: #a86340;
  --p-terracotta-700: #8e5235;

  /* ===== Gray Scale (Neutral) ===== */
  --p-gray-50: #fafafa;
  --p-gray-100: #f5f5f5;
  --p-gray-200: #e5e5e5;
  --p-gray-300: #d4d4d4;
  --p-gray-400: #a3a3a3;
  --p-gray-500: #737373;
  --p-gray-600: #525252;
  --p-gray-700: #404040;
  --p-gray-800: #262626;
  --p-gray-900: #171717;

  /* ===== Lavender Scale (Purple-tinted Gray) ===== */
  --p-lavender-50: #f8f8fc;
  --p-lavender-100: #f0f0f8;
  --p-lavender-200: #e8e8f4;
  --p-lavender-300: #d8d8e8;
  --p-lavender-400: #a0a0b8;
  --p-lavender-500: #6b6b8a;
  --p-lavender-600: #4a4a68;
  --p-lavender-700: #2a2a3c;
  --p-lavender-750: #3a3a50;
  --p-lavender-800: #1c1c28;
  --p-lavender-850: #14141e;
  --p-lavender-900: #0d0d14;

  /* ===== Lavender Text Scale (for Dark-2 text) ===== */
  --p-lavender-text-primary: #e8e8f0;
  --p-lavender-text-muted: #7878a0;

  /* ===== Navy Scale (Blue-tinted Dark) ===== */
  --p-navy-50: #f0f4f8;
  --p-navy-100: #d9e2ec;
  --p-navy-200: #bcccdc;
  --p-navy-300: #9fb3c8;
  --p-navy-400: #829ab1;
  --p-navy-500: #627d98;
  --p-navy-600: #486581;
  --p-navy-700: #334e68;
  --p-navy-800: #243b53;
  --p-navy-850: #1e2a36;
  --p-navy-875: #16202a;
  --p-navy-900: #0f1419;

  /* ===== Navy Border Scale (for Dark-1 borders) ===== */
  --p-navy-border-light: #3d4d5c;
  --p-navy-border: #2f3b47;

  /* ===== Navy Text Scale (for Dark-1 text) ===== */
  --p-navy-text-primary: #e7e9ea;
  --p-navy-text-muted: #6e7a86;

  /* ===== Indigo Scale ===== */
  --p-indigo-50: #eef2ff;
  --p-indigo-100: #e0e7ff;
  --p-indigo-200: #c7d2fe;
  --p-indigo-300: #a5b4fc;
  --p-indigo-400: #818cf8;
  --p-indigo-500: #6366f1;
  --p-indigo-600: #4f46e5;
  --p-indigo-700: #4338ca;
  --p-indigo-800: #3730a3;
  --p-indigo-900: #312e81;

  /* ===== Blue Scale ===== */
  --p-blue-50: #eff6ff;
  --p-blue-100: #dbeafe;
  --p-blue-200: #bfdbfe;
  --p-blue-300: #93c5fd;
  --p-blue-400: #60a5fa;
  --p-blue-500: #3b82f6;
  --p-blue-600: #2563eb;
  --p-blue-700: #1d4ed8;
  --p-blue-800: #1e40af;
  --p-blue-900: #1e3a8a;

  /* ===== Soft Blue (for Dark Theme Accent) ===== */
  --p-soft-blue-300: #90caf9;
  --p-soft-blue-400: #64b5f6;
  --p-soft-blue-500: #42a5f5;

  /* ===== Purple Scale ===== */
  --p-purple-50: #faf5ff;
  --p-purple-100: #f3e8ff;
  --p-purple-200: #e9d5ff;
  --p-purple-300: #d8b4fe;
  --p-purple-400: #c084fc;
  --p-purple-500: #a855f7;
  --p-purple-600: #9333ea;
  --p-purple-700: #7e22ce;
  --p-purple-800: #6b21a8;
  --p-purple-900: #581c87;
}

/* ========================================
   SEMANTIC TOKENS - Light Theme (Cloud Dancer)
   Pantone 2026 Color of the Year 베이스
   ======================================== */

:root {
  /* Background - Cloud Dancer 베이스 */
  --bg-primary: var(--p-cloud-50);
  --bg-secondary: var(--p-cloud-100);
  --bg-tertiary: var(--p-cloud-200);
  --bg-elevated: rgba(250, 249, 247, 0.92);
  --bg-code: var(--p-cloud-800);
  --bg-code-inline: var(--p-cloud-200);

  /* Text - 따뜻한 톤 유지 */
  --text-primary: var(--p-cloud-800);
  --text-secondary: var(--p-cloud-600);
  --text-muted: var(--p-cloud-500);
  --text-inverted: var(--p-cloud-50);

  /* Border - 부드러운 경계 */
  --border-default: var(--p-cloud-300);
  --border-muted: var(--p-cloud-400);
  --border-code: transparent;

  /* Accent - Terracotta (Cloud Dancer와 조화) */
  --accent-primary: var(--p-terracotta-500);
  --accent-hover: var(--p-terracotta-400);

  /* Tag/Badge */
  --tag-bg: var(--p-cloud-200);
  --tag-bg-hover: var(--p-cloud-300);
  --tag-text: var(--p-cloud-700);

  /* Glass - Cloud Dancer 기반 글래스 */
  --glass-bg: rgba(250, 249, 247, 0.45);
  --glass-bg-solid: rgba(240, 238, 233, 0.92);
  --glass-bg-subtle: rgba(194, 117, 79, 0.06);

  /* Glass borders - 상단은 밝게, 하단은 어둡게 (입체감) */
  --glass-border-top: rgba(255, 255, 255, 0.8);
  --glass-border-bottom: rgba(0, 0, 0, 0.05);
  --glass-border: rgba(255, 255, 255, 0.5);
  --glass-border-subtle: rgba(0, 0, 0, 0.04);

  /* Glass inner glow - 내부 하이라이트 */
  --glass-inner-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.9),
    inset 0 -1px 1px rgba(0, 0, 0, 0.05),
    inset 0 20px 30px -10px rgba(255, 255, 255, 0.5);

  /* Glass outer shadow - 외부 그림자 (플로팅 효과) */
  --glass-shadow:
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 2px 8px rgba(0, 0, 0, 0.08);
  --glass-shadow-lg:
    0 12px 48px rgba(0, 0, 0, 0.15),
    0 4px 16px rgba(0, 0, 0, 0.1);

  /* Glass glow - 호버 시 빛나는 효과 */
  --glass-glow:
    0 0 0 1px rgba(255, 255, 255, 0.6),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 1px rgba(255, 255, 255, 0.9);

  /* Glass specular - 가장자리 광택 */
  --glass-specular: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.4) 0%,
    rgba(255, 255, 255, 0) 50%,
    rgba(255, 255, 255, 0.1) 100%
  );

  /* Blur & saturation */
  --glass-blur: 16px;
  --glass-blur-lg: 24px;
  --glass-saturate: 180%;
}

/* ========================================
   SEMANTIC TOKENS - Dark Theme 1 (Deep Navy)
   Twitter/X 스타일 딥 네이비 기반
   ======================================== */
.dark,
.dark-1 {
  /* Background */
  --bg-primary: var(--p-navy-900);
  --bg-secondary: var(--p-navy-875);
  --bg-tertiary: var(--p-navy-850);
  --bg-elevated: rgba(22, 32, 42, 0.9);
  --bg-code: var(--p-navy-900);
  --bg-code-inline: var(--p-navy-875);

  /* Text */
  --text-primary: var(--p-navy-text-primary);
  --text-secondary: var(--p-navy-400);
  --text-muted: var(--p-navy-text-muted);
  --text-inverted: var(--p-navy-900);

  /* Border */
  --border-default: var(--p-navy-border);
  --border-muted: var(--p-navy-border-light);
  --border-code: var(--p-navy-border);

  /* Accent */
  --accent-primary: var(--p-soft-blue-400);
  --accent-hover: var(--p-soft-blue-300);

  /* Tag/Badge */
  --tag-bg: var(--p-navy-875);
  --tag-bg-hover: var(--p-navy-850);
  --tag-text: var(--p-navy-400);

  /* Glass */
  --glass-bg: rgba(30, 42, 54, 0.5);
  --glass-bg-solid: rgba(22, 32, 42, 0.92);
  --glass-bg-subtle: rgba(100, 181, 246, 0.08);

  /* Glass borders - 더 밝은 하이라이트 */
  --glass-border-top: rgba(255, 255, 255, 0.2);
  --glass-border-bottom: rgba(0, 0, 0, 0.25);
  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-border-subtle: rgba(255, 255, 255, 0.08);

  /* Glass inner glow - 더 강한 하이라이트 */
  --glass-inner-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.2),
    inset 0 -1px 1px rgba(0, 0, 0, 0.15),
    inset 0 20px 30px -10px rgba(255, 255, 255, 0.08);

  /* Glass outer shadow */
  --glass-shadow:
    0 8px 32px rgba(0, 0, 0, 0.35),
    0 2px 8px rgba(0, 0, 0, 0.25);
  --glass-shadow-lg:
    0 12px 48px rgba(0, 0, 0, 0.45),
    0 4px 16px rgba(0, 0, 0, 0.35);

  /* Glass glow */
  --glass-glow:
    0 0 0 1px rgba(255, 255, 255, 0.2),
    0 8px 24px rgba(0, 0, 0, 0.25),
    inset 0 1px 1px rgba(255, 255, 255, 0.15);

  /* Glass specular - 더 강한 광택 */
  --glass-specular: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.15) 0%,
    rgba(255, 255, 255, 0) 50%,
    rgba(255, 255, 255, 0.08) 100%
  );

  /* Blur 강화 */
  --glass-blur: 20px;
}

/* ========================================
   SEMANTIC TOKENS - Dark Theme 2 (Purple Tint)
   미묘한 블루/퍼플 색조
   ======================================== */
.dark-2 {
  /* Background */
  --bg-primary: var(--p-lavender-900);
  --bg-secondary: var(--p-lavender-850);
  --bg-tertiary: var(--p-lavender-800);
  --bg-elevated: rgba(20, 20, 30, 0.92);
  --bg-code: var(--p-lavender-900);
  --bg-code-inline: var(--p-lavender-800);

  /* Text */
  --text-primary: var(--p-lavender-text-primary);
  --text-secondary: var(--p-lavender-400);
  --text-muted: var(--p-lavender-text-muted);
  --text-inverted: var(--p-lavender-900);

  /* Border */
  --border-default: var(--p-lavender-700);
  --border-muted: var(--p-lavender-750);
  --border-code: var(--p-lavender-700);

  /* Accent */
  --accent-primary: var(--p-indigo-400);
  --accent-hover: var(--p-indigo-300);

  /* Tag/Badge */
  --tag-bg: var(--p-lavender-800);
  --tag-bg-hover: var(--p-lavender-700);
  --tag-text: var(--p-lavender-400);

  /* Glass - 퍼플 틴트 글래스 */
  --glass-bg: rgba(40, 40, 60, 0.45);
  --glass-bg-solid: rgba(28, 28, 40, 0.92);
  --glass-bg-subtle: rgba(130, 130, 255, 0.08);

  /* Glass borders - 퍼플 틴트 하이라이트 */
  --glass-border-top: rgba(180, 180, 255, 0.2);
  --glass-border-bottom: rgba(0, 0, 20, 0.3);
  --glass-border: rgba(150, 150, 255, 0.12);
  --glass-border-subtle: rgba(130, 130, 255, 0.06);

  /* Glass inner glow - 퍼플 틴트 */
  --glass-inner-shadow:
    inset 0 1px 1px rgba(180, 180, 255, 0.18),
    inset 0 -1px 1px rgba(0, 0, 20, 0.2),
    inset 0 20px 30px -10px rgba(130, 130, 255, 0.06);

  /* Glass outer shadow - 깊은 퍼플 */
  --glass-shadow:
    0 8px 32px rgba(10, 10, 30, 0.5),
    0 2px 8px rgba(10, 10, 30, 0.4);
  --glass-shadow-lg:
    0 12px 48px rgba(10, 10, 30, 0.6),
    0 4px 16px rgba(10, 10, 30, 0.5);

  /* Glass glow - 퍼플 글로우 */
  --glass-glow:
    0 0 0 1px rgba(150, 150, 255, 0.18),
    0 8px 24px rgba(10, 10, 30, 0.4),
    inset 0 1px 1px rgba(180, 180, 255, 0.12);

  /* Glass specular - 퍼플 광택 */
  --glass-specular: linear-gradient(
    135deg,
    rgba(180, 180, 255, 0.12) 0%,
    rgba(150, 150, 255, 0) 50%,
    rgba(130, 130, 255, 0.06) 100%
  );

  /* Blur 강화 */
  --glass-blur: 20px;
}

/* Tailwind theme extension */
@theme {
  /* Font family */
  --font-sans: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  --font-mono: var(--font-mono, ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace);

  --color-bg-primary: var(--bg-primary);
  --color-bg-secondary: var(--bg-secondary);
  --color-bg-tertiary: var(--bg-tertiary);
  --color-bg-elevated: var(--bg-elevated);
  --color-bg-code: var(--bg-code);
  --color-bg-code-inline: var(--bg-code-inline);

  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  --color-text-inverted: var(--text-inverted);

  --color-border-default: var(--border-default);
  --color-border-muted: var(--border-muted);
  --color-border-code: var(--border-code);

  --color-accent-primary: var(--accent-primary);
  --color-accent-hover: var(--accent-hover);

  --color-tag-bg: var(--tag-bg);
  --color-tag-bg-hover: var(--tag-bg-hover);
  --color-tag-text: var(--tag-text);

  /* Glass tokens */
  --color-glass-bg: var(--glass-bg);
  --color-glass-bg-solid: var(--glass-bg-solid);
  --color-glass-bg-subtle: var(--glass-bg-subtle);
  --color-glass-border: var(--glass-border);
  --color-glass-border-subtle: var(--glass-border-subtle);
}

/* ========================================
   highlight.js theme (uses tokens)
   ======================================== */

.hljs {
  background: var(--bg-code) !important;
  color: #c9d1d9;
}

/* Reset highlight.js code element styles */
pre code.hljs,
code.hljs {
  background: transparent !important;
  padding: 0 !important;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-section,
.hljs-link {
  color: #ff7b72;
}

.hljs-string,
.hljs-title,
.hljs-name,
.hljs-type,
.hljs-attribute,
.hljs-symbol,
.hljs-bullet,
.hljs-addition,
.hljs-variable,
.hljs-template-tag,
.hljs-template-variable {
  color: #a5d6ff;
}

.hljs-comment,
.hljs-quote,
.hljs-deletion,
.hljs-meta {
  color: #8b949e;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-title,
.hljs-section,
.hljs-doctag,
.hljs-type,
.hljs-name,
.hljs-strong {
  font-weight: bold;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-number {
  color: #79c0ff;
}

.hljs-function .hljs-title {
  color: #d2a8ff;
}

.hljs-built_in {
  color: #ffa657;
}

.hljs-class .hljs-title {
  color: #7ee787;
}

.hljs-attr {
  color: #79c0ff;
}

/* ========================================
   NProgress Styles
   ======================================== */

#nprogress {
  pointer-events: none;
}

#nprogress .bar {
  background: var(--accent-primary);
  position: fixed;
  z-index: 1031;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
}

#nprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow:
    0 0 10px var(--accent-primary),
    0 0 5px var(--accent-primary);
  opacity: 1;
  transform: rotate(3deg) translate(0px, -4px);
}

/* ========================================
   Liquid Glass Design System
   ======================================== */

@layer components {
  /* Full glass effect (blur + saturate - use sparingly, max 3 per screen) */
  .glass {
    position: relative;
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: 1px solid var(--glass-border);
    border-top-color: var(--glass-border-top);
    border-bottom-color: var(--glass-border-bottom);
    box-shadow:
      var(--glass-shadow),
      var(--glass-inner-shadow);
  }

  /* Specular highlight overlay for .glass */
  .glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--glass-specular);
    border-radius: inherit;
    pointer-events: none;
    opacity: 0.7;
  }

  /* Glass panel (no blur, but full styling) */
  .glass-panel {
    position: relative;
    background: var(--glass-bg-solid);
    border: 1px solid var(--glass-border);
    border-top-color: var(--glass-border-top);
    border-bottom-color: var(--glass-border-bottom);
    box-shadow:
      var(--glass-shadow),
      var(--glass-inner-shadow);
  }

  .glass-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--glass-specular);
    border-radius: inherit;
    pointer-events: none;
    opacity: 0.5;
  }

  /* Glass card with hover effects */
  .glass-card {
    position: relative;
    background: var(--bg-primary);
    border: 1px solid var(--glass-border-subtle);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--glass-specular);
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.25s ease;
  }

  .glass-card:hover {
    border-color: var(--glass-border);
    box-shadow: var(--glass-glow);
    transform: translateY(-2px);
  }

  .glass-card:hover::before {
    opacity: 0.4;
  }

  /* Glass hover effect for buttons/icons */
  .glass-hover {
    position: relative;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-hover:hover {
    background: var(--glass-bg-subtle);
    box-shadow:
      0 0 0 1px var(--glass-border),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  /* Glass tag/badge */
  .glass-tag {
    position: relative;
    background: var(--glass-bg-subtle);
    border: 1px solid var(--glass-border-subtle);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.15s ease;
  }

  .glass-tag:hover {
    background: var(--glass-bg);
    border-color: var(--glass-border);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.2),
      0 2px 8px rgba(0, 0, 0, 0.08);
  }

  /* Glass button - 특별한 버튼용 */
  .glass-button {
    position: relative;
    background: var(--glass-bg);
    backdrop-filter: blur(8px) saturate(150%);
    -webkit-backdrop-filter: blur(8px) saturate(150%);
    border: 1px solid var(--glass-border);
    border-top-color: var(--glass-border-top);
    box-shadow:
      0 4px 16px rgba(0, 0, 0, 0.1),
      inset 0 1px 1px rgba(255, 255, 255, 0.4);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-button:hover {
    transform: translateY(-1px);
    box-shadow:
      0 6px 20px rgba(0, 0, 0, 0.15),
      inset 0 1px 1px rgba(255, 255, 255, 0.5);
  }

  .glass-button:active {
    transform: translateY(0);
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.1),
      inset 0 1px 1px rgba(255, 255, 255, 0.3);
  }

  /* Glass code block */
  .glass-code {
    position: relative;
    background: linear-gradient(
      145deg,
      rgba(17, 24, 39, 0.95) 0%,
      rgba(17, 24, 39, 0.85) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-top-color: rgba(255, 255, 255, 0.15);
    border-bottom-color: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 2px 8px rgba(0, 0, 0, 0.2),
      inset 0 1px 1px rgba(255, 255, 255, 0.1),
      inset 0 -1px 1px rgba(0, 0, 0, 0.2);
    overflow: hidden;
  }

  .glass-code::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.08) 0%,
      rgba(255, 255, 255, 0) 50%,
      rgba(255, 255, 255, 0.03) 100%
    );
    border-radius: inherit;
    pointer-events: none;
    opacity: 0.8;
  }

  .glass-code pre {
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    border-radius: inherit;
    overflow-x: auto;
  }

  .glass-code pre code,
  .glass-code > pre > code {
    display: block !important;
    padding: 1.25rem 1.5rem !important;
    background: transparent !important;
  }

  /* Glass inline code (for prose) */
  .glass-inline-code {
    position: relative;
    background: var(--glass-bg-subtle);
    border: 1px solid var(--glass-border-subtle);
    border-radius: 6px;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
    padding: 0.125rem 0.375rem;
    font-size: 0.875em;
  }
}

/* Accessibility: Reduced transparency */
@media (prefers-reduced-transparency: reduce) {
  .glass,
  .glass-panel {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--bg-primary);
    border-color: var(--border-default);
  }

  .glass-card,
  .glass-tag {
    background: var(--bg-primary);
    border-color: var(--border-default);
  }

  .glass-hover:hover {
    background: var(--bg-tertiary);
    box-shadow: none;
  }
}

/* Accessibility: Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .glass-card,
  .glass-hover,
  .glass-tag {
    transition: none;
  }
}
